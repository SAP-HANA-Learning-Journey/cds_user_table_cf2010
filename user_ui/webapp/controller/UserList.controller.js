sap.ui.define([
	"sap/ui/core/mvc/Controller",
	"sap/m/MessageBox"
], function (Controller, MessageBox) {
	"use strict";
	return Controller.extend("dev.user_ui.controller.UserList", {
		onInit: function () {},
		/**
		 *@memberOf dev.user_ui.controller.UserList
		 */
		onCreate: function (oEvent) {
			//This code was generated by the layout editor.
			var oLocal = this.getView().getModel("local");
			var oService = this.getView().getModel();
			var oBundle = this.getView().getModel("i18n");
			var oNewUser = oLocal.getProperty("/User");
			oService.create("/Users", oNewUser, {
				success: function () {
					MessageBox.alert(oBundle.getProperty("msgCreateSuccess"));
					oLocal.setProperty("/User", {});
				},
				error: function (oError) {
					var errorMessage = oError.responseText !== ""
						? JSON.parse(oError.responseText).response.error.message.value
						: oBundle.getProperty("msgUnknown");
					MessageBox.alert(oBundle.getProperty("msgCreateError") + errorMessage);
				}
			});
		},
		/**
		 *@memberOf dev.user_ui.controller.UserList
		 */
		onItemPress: function (oEvent) {
			//This code was generated by the layout editor.
			//This code was generated by the layout editor.
			var oLocal = this.getView().getModel("local");
			var oSelectedItem = oEvent.getSource().getSelectedItem();
			var sPath = oSelectedItem.getBindingContext().getPath();
			oLocal.setProperty("/SelectedUserPath", sPath);
		},
		/**
		 *@memberOf dev.user_ui.controller.UserList
		 */
		onDelete: function (oEvent) {
			//This code was generated by the layout editor.
			var oLocal = this.getView().getModel("local");
			var oService = this.getView().getModel();
			var oBundle = this.getView().getModel("i18n");
			var sPath = oLocal.getProperty("/SelectedUserPath");
			if (sPath === "") {
				MessageBox.alert(oBundle.getProperty("msgDeleteNoSelection"));
			} else {
				oService.remove(sPath, {
					success: function () {
						MessageBox.alert(oBundle.getProperty("msgDeleteSuccess"));
						oLocal.setProperty("/SelectedUserPath", "");
					},
					error: function (oError) {
						var errorMessage = oError.responseText !== ""
							? JSON.parse(oError.responseText).response.error.message.value
							: oBundle.getProperty("msgUnknown");
						MessageBox.alert(oBundle.getProperty("msgDeleteError") + errorMessage);
					}
				});
			}
		}

	});

});